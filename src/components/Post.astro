---
import type { CollectionEntry } from "astro:content";
import config from "config";
import { Icon } from "astro-icon";
import path from "path";
import { postdate } from "../components/utilities/DateFormat.js";
import { titleCase } from "../components/utilities/StringFormat.js";

interface Props {
  post: CollectionEntry<"posts">;
}
const { post } = Astro.props;
const { Content } = await post.render();
---

<article>
  <header>
    <h1>
      <a
        href={new URL(
          path.join(config.get("posts.path"), post.slug),
          config.get("url")
        )}
        >{titleCase(post.data.title)}
      </a>
    </h1>
    <div class="time">
      <Icon pack="bi" name="calendar2-week-fill" />
      <time datetime={post.data.date}>
        <a
          href={new URL(
            path.join(config.get("posts.path"), post.slug),
            config.get("url")
          )}
        >
          {postdate(post.data.date)}
        </a>
      </time>
    </div>
  </header>
  <Content />
</article>
<style>
  [astro-icon] {
    width: 2rem;
    padding: 0 0.25rem;
    margin: -0.4em 0;
  }
  img {
    width: 500px;
  }
</style>
